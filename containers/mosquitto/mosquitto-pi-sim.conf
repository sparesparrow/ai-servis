# Mosquitto configuration for Pi Simulation Environment
# Optimized for development and testing

# =============================================================================
# GENERAL CONFIGURATION
# =============================================================================

# Process ID file
pid_file /var/run/mosquitto.pid

# Persistence
persistence true
persistence_location /mosquitto/data/

# Logging
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout
log_type error
log_type warning
log_type notice
log_type information
log_timestamp true
connection_messages true
log_timestamp_format %Y-%m-%dT%H:%M:%S

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================

# Default MQTT port
port 1883

# WebSocket support
listener 9001
protocol websockets

# Maximum connections
max_connections 1000

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Allow anonymous connections (development only)
allow_anonymous true

# Password file (if needed)
# password_file /mosquitto/config/passwd

# ACL file (if needed)
# acl_file /mosquitto/config/acl

# =============================================================================
# MESSAGE CONFIGURATION
# =============================================================================

# Message size limits
message_size_limit 0

# Queue limits
max_queued_messages 1000
max_inflight_messages 20

# =============================================================================
# PERSISTENCE CONFIGURATION
# =============================================================================

# Persistence settings
autosave_interval 1800
autosave_on_changes false

# =============================================================================
# BRIDGE CONFIGURATION (if needed)
# =============================================================================

# Bridge to main MQTT broker (if running separately)
# connection main-broker
# address mqtt-broker:1883
# topic ai-servis/# out 0
# topic esp32/# out 0
# topic hardware/# out 0

# =============================================================================
# TOPIC PATTERNS FOR PI SIMULATION
# =============================================================================

# Expected topic patterns:
# ai-servis/pi-gateway/+/status
# ai-servis/pi-gateway/+/telemetry
# esp32/+/obd/data
# esp32/+/io/sensors
# esp32/+/cam/stream
# hardware/gpio/+/state
# hardware/i2c/+/data
# hardware/spi/+/data
# vehicle/simulation/+/data